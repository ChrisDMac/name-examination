webpackJsonp([6],{"9a7F":function(t,e){},Auo9:function(t,e,a){"use strict";var n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("nav",{staticClass:"navbar fixed-top navbar-dark navbar-expand-lg",staticStyle:{"background-color":"#041978"}},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[a("ul",{staticClass:"navbar-nav mr-auto"},[a("li",{staticClass:"nav-item active"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/mainPage"}},[t._v("Home")])],1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),a("li",{staticClass:"nav-item active"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/settings"}},[t._v("Settings")])],1),t._v(" "),t.auth?t._e():a("li",{staticClass:"nav-item active"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/signup"}},[t._v("Sign Up")])],1),t._v(" "),t.auth?t._e():a("li",{staticClass:"nav-item active"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/signin"}},[t._v("Login")])],1),t._v(" "),t.auth?a("li",{staticClass:"nav-item active"},[a("button",{staticClass:"nav-link btn-outline-dark",staticStyle:{"background-color":"#041978"},on:{click:t.onLogout}},[t._v("Logout\n          ")])]):t._e()]),t._v(" "),t._m(4),t._v(" "),a("p",{staticClass:"navbar-text"},[t._v("Â "+t._s(t.email))])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[e("img",{attrs:{src:"static/images/gov3_bc_logo.png",alt:"Province of British Columbia",title:"Province of British Columbia logo"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"nav-item active"},[e("a",{staticClass:"nav-link",attrs:{href:"#"}},[this._v("Link")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"nav-item dropdown"},[a("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n            Dropdown\n          ")]),t._v(" "),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdown"}},[a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Action")]),t._v(" "),a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Another action")]),t._v(" "),a("div",{staticClass:"dropdown-divider"}),t._v(" "),a("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("Something else here")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("form",{staticClass:"form-inline my-2 my-lg-0"},[e("input",{staticClass:"form-control mr-sm-2",attrs:{type:"search",placeholder:"Search","aria-label":"Search"}}),this._v(" "),e("button",{staticClass:"btn btn-outline-success my-2 my-sm-0",attrs:{type:"submit"}},[this._v("Search")])])}]};var o=a("VU/8")({name:"std-header",computed:{email:function(){return this.$store.getters.email},auth:function(){return this.$store.getters.isAuthenticated}},methods:{onLogout:function(){this.$store.dispatch("logout")}}},n,!1,function(t){a("Lal6")},"data-v-3ec9383c",null);e.a=o.exports},Lal6:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),o={name:"App",components:{StdHeader:a("Auo9").a},created:function(){this.$store.dispatch("tryAutoLogin")}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container-fluid"},[e("div",{attrs:{id:"app"}},[e("std-header"),this._v(" "),e("div",{staticClass:"row"},[e("router-view")],1)],1)])},staticRenderFns:[]};var i=a("VU/8")(o,s,!1,function(t){a("9a7F")},null,null).exports,r=a("mtWM"),l=a.n(r),c=a("ESwS"),u=a.n(c),d=a("/ocq"),m=a("NYxO"),g=l.a.create({baseURL:"https://www.googleapis.com/identitytoolkit/v3/relyingparty"});n.a.use(m.a);var v=new m.a.Store({state:{idToken:null,userId:null,user:null,email:null,dbConfig:{dbURL:null,secKey:null}},mutations:{authUser:function(t,e){t.idToken=e.token,t.userId=e.userId,t.email=e.email,t.user=e.email},storeUser:function(t,e){t.user=e},storeDbConfig:function(t,e){t.dbConfig.dbURL=e.dbURL,t.dbConfig.secKey=e.secKey,l.a.defaults.baseURL=t.dbConfig.dbURL},clearAuthData:function(t){t.idToken=null,t.userId=null}},actions:{signup:function(t,e){var a=t.commit,n=t.dispatch,o=t.state;g.post("/signupNewUser?key="+o.dbConfig.secKey,{email:e.email,password:e.password,returnSecureToken:!0}).then(function(t){console.log(t),a("authUser",{token:t.data.idToken,userId:t.data.localId,email:e.email});var o=new Date,s=new Date(o.getTime()+1e3*t.data.expiresIn);localStorage.setItem("token",t.data.idToken),localStorage.setItem("userId",t.data.localId),localStorage.setItem("expirationDate",s),localStorage.setItem("email",e.email),n("storeUser",e)}).catch(function(t){return console.log(t)})},dbConfigSetup:function(t,e){var a=t.commit;t.dispatch;console.log("action: setting the DB Config"),localStorage.setItem("dbURL",e.dbURL),localStorage.setItem("secKey",e.secKey),a("storeDbConfig",e)},login:function(t,e){var a=t.commit,n=(t.dispatch,t.state);g.post("/verifyPassword?key="+n.dbConfig.secKey,{email:e.email,password:e.password,returnSecureToken:!0}).then(function(t){console.log(t);var n=new Date,o=new Date(n.getTime()+1e3*t.data.expiresIn);localStorage.setItem("token",t.data.idToken),localStorage.setItem("userId",t.data.localId),localStorage.setItem("expirationDate",o),localStorage.setItem("email",e.email),a("authUser",{token:t.data.idToken,userId:t.data.localId,email:e.email})}).catch(function(t){return console.log(t)}),f.push("/mainPage")},tryAutoLogin:function(t){var e=t.commit,a=localStorage.getItem("dbURL"),n=localStorage.getItem("secKey");a&&(console.log("Autoloading dbConfig",a),e("storeDbConfig",{dbURL:a,secKey:n})),console.log("trying to load user");var o=localStorage.getItem("token");if(o){var s=localStorage.getItem("expirationDate");if(!(new Date>=s))e("authUser",{token:o,userId:localStorage.getItem("userId"),email:localStorage.getItem("email")})}},logout:function(t){(0,t.commit)("clearAuthData"),localStorage.removeItem("expirationDate"),localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("email"),f.replace("/signin")},storeUser:function(t,e){t.commit;var a=t.state;a.idToken&&l.a.post("/users.json?auth="+a.idToken,e).then(function(t){return console.log(t)}).catch(function(t){return console.log(t)})},fetchUser:function(t){var e=t.commit,a=t.state;a.idToken&&l.a.get("/users.json?auth="+a.idToken).then(function(t){console.log(t);var a=t.data,n=[];for(var o in a){var s=a[o];s.id=o,n.push(s)}console.log(n),e("storeUser",n[0])}).catch(function(t){return console.log(t)})}},getters:{user:function(t){return t.user},email:function(t){return t.email},isAuthenticated:function(t){return null!==t.idToken}}});n.a.use(d.a),n.a.use(m.a);var p=new d.a({mode:"history",routes:[{path:"/",name:"LandingPage",component:function(){return a.e(1).then(a.bind(null,"wSyU"))}},{path:"/signin",name:"Signin",component:function(){return a.e(4).then(a.bind(null,"0fxw"))}},{path:"/signup",name:"Signup",component:function(){return a.e(0).then(a.bind(null,"mUAJ"))}},{name:"settings",component:function(){return a.e(2).then(a.bind(null,"xj7j"))},path:"/settings"},{name:"mainPage",component:function(){return a.e(3).then(a.bind(null,"vExf"))},path:"/mainPage",meta:{requiresAuth:!0}}]});p.beforeResolve(function(t,e,a){t.matched.some(function(t){return t.meta.requiresAuth})&&null===v.state.idToken?(console.log("redirect to /"),a({path:"/"})):a()});var f=p;n.a.use(u.a),l.a.defaults.headers.get.Accepts="application/json",n.a.config.productionTip=!1,new n.a({el:"#app",router:f,store:v,render:function(t){return t(i)}})}},["NHnr"]);
//# sourceMappingURL=app.8745c333f0e476e67ea5.js.map